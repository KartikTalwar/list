(function(d,e){var a=d.document,c;var b=function(g,s,o){var q=this,n,p,m,r,i,f,h,l="";this.listContainer=a.getElementById(g);this.items=[];this.searched=false;this.filtered=false;this.list=null;this.templateEngines={};this.maxVisibleItemsCount=s.maxVisibleItemsCount||200;p=function(t,v){v.list=v.list||g;v.listClass=v.listClass||"list";v.searchClass=v.searchClass||"search";v.sortClass=v.sortClass||"sort";n=new f(q,v);q.list=c.getByClass(v.listClass,q.listContainer,true);c.addEvent(c.getByClass(v.searchClass,q.listContainer),"keyup",q.search);h=c.getByClass(v.sortClass,q.listContainer);c.addEvent(h,"click",q.sort);if(v.valueNames){var w=m.get(),u=v.valueNames;if(v.indexAsync){m.indexAsync(w,u)}else{m.index(w,u)}}if(t!==e){q.add(t)}};m={get:function(){var v=q.list.childNodes,u=[];for(var w=0,t=v.length;w<t;w++){if(v[w].data===e){u.push(v[w])}}return u},index:function(t,v){for(var w=0,u=t.length;w<u;w++){q.items.push(new i(v,t[w]))}},indexAsync:function(t,u){var v=t.splice(0,100);this.index(v,u);if(t.length>0){setTimeout(function(){m.indexAsync(t,u)},10)}}};this.add=function(u,v){var y=[],x=false;if(u[0]===e){u=[u]}for(var w=0,t=u.length;w<t;w++){var z=null;if(u[w] instanceof i){z=u[w];z.reload()}else{x=(q.items.length>q.maxVisibleItemsCount)?true:false;z=new i(u[w],e,x)}if(!x){n.add(z,v)}q.items.push(z);y.push(z)}return y};this.addAsync=function(t,u){var v=u?u.count||100:100,w=t.splice(0,v);q.add(w,u);if(t.length>0){setTimeout(function(){q.addAsync(t,u)},10)}};this.remove=function(y,x,u){var w=0;for(var v=0,t=q.items.length;v<t;v++){if(q.items[v].values()[y]==x){n.remove(q.items[v],u);q.items.splice(v,1);t--;w++}}return w};this.get=function(y,w){var x=[];for(var u=0,t=q.items.length;u<t;u++){var v=q.items[u];if(v.values()[y]==w){x.push(v)}}if(x.length==0){return null}else{if(x.length==1){return x[0]}else{return x}}};this.sort=function(z,D){var t=q.items.length,C=null,x=z.target||z.srcElement,v="",y=false,B="asc",w="desc",D=D||{};if(x===e){C=z;y=D.asc||false}else{C=c.getAttribute(x,"data-sort");y=c.hasClass(x,B)?false:true}for(var u=0,A=h.length;u<A;u++){c.removeClass(h[u],B);c.removeClass(h[u],w)}if(y){if(x!==e){c.addClass(x,B)}y=true}else{if(x!==e){c.addClass(x,w)}y=false}if(D.sortFunction){D.sortFunction=D.sortFunction}else{D.sortFunction=function(F,E){return r.alphanum(F.values()[C],E.values()[C],y)}}q.items.sort(D.sortFunction);j()};r={alphanum:function(v,u,w){if(v===e||v===null){v=""}if(u===e||u===null){u=""}v=v.toString().replace(/&(lt|gt);/g,function(x,C){return(C=="lt")?"<":">"});v=v.replace(/<\/?[^>]+(>|$)/g,"");u=u.toString().replace(/&(lt|gt);/g,function(x,C){return(C=="lt")?"<":">"});u=u.replace(/<\/?[^>]+(>|$)/g,"");var y=this.chunkify(v);var A=this.chunkify(u);for(var t=0;y[t]&&A[t];t++){if(y[t]!==A[t]){var B=Number(y[t]),z=Number(A[t]);if(w){if(B==y[t]&&z==A[t]){return B-z}else{return(y[t]>A[t])?1:-1}}else{if(B==y[t]&&z==A[t]){return z-B}else{return(y[t]>A[t])?-1:1}}}}return y.length-A.length},chunkify:function(A){var D=[],v=0,C=-1,B=0,z,w;while(z=(w=A.charAt(v++)).charCodeAt(0)){var u=(z==45||z==46||(z>=48&&z<=57));if(u!==B){D[++C]="";B=u}D[C]+=w}return D}};this.search=function(E,v){var u=[],D,C,B,A,y,v=(v===e)?q.items[0].values():v,E=(E===e)?"":E,z=E.target||E.srcElement;E=(z===e)?E.toLowerCase():z.value.toLowerCase();y=q.items;E=E.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");n.clear();if(E===""){k.search();q.searched=false;j()}else{q.searched=true;for(var w=0,t=y.length;w<t;w++){D=false;C=y[w];A=C.values();for(var x in v){if(A.hasOwnProperty(x)&&v[x]!==null){B=A[x].toString().toLowerCase();if((E!=="")&&(B.search(E)>-1)){D=true}}}if(D){C.found=true;u.push(C)}else{C.found=false}}j()}l=E;return u};this.filter=function(y){var x=e;k.filter();if(y===e){q.filtered=false}else{x=[];q.filtered=true;var w=q.items;for(var u=0,t=w.length;u<t;u++){var v=w[u];if(y(v.values())){v.filtered=true;x.push(v)}else{v.filtered=false}}}j();return x};this.size=function(){return q.items.length};this.clear=function(){n.clear();q.items=[]};var k={filter:function(){var u=q.items,t=u.length;while(t--){u[t].filtered=false}},search:function(){var u=q.items,t=u.length;while(t--){u[t].found=false}}};var j=function(){var v=q.items;n.clear();for(var u=0,t=v.length;u<t&&u<q.maxVisibleItemsCount;u++){if((q.filtered&&q.searched&&v[u].found&&v[u].filtered)||(q.filtered&&!q.searched&&v[u].filtered)||(!q.filtered&&q.searched&&v[u].found)||(!q.filtered&&!q.searched)){v[u].show()}}};i=function(u,w,v){var x=this,t={};this.found=false;this.filtered=false;var y=function(A,C,B){if(C===e){if(B){x.values(A,B)}else{x.values(A)}}else{x.elm=C;var z=n.get(x,A);x.values(z)}};this.values=function(A,B){if(A!==e){for(var z in A){t[z]=A[z]}if(B!==true){n.set(x,x.values())}}else{return t}};this.show=function(){n.show(x)};this.hide=function(){n.hide(x)};y(u,w,v)};f=function(u,t){if(t.engine===e){t.engine="standard"}else{t.engine=t.engine.toLowerCase()}return new q.constructor.prototype.templateEngines[t.engine](u,t)};p(o,s)};b.prototype.templateEngines={};b.prototype.templateEngines.standard=function(j,g){var k=c.getByClass(g.listClass,a.getElementById(g.list))[0],i=a.getElementById(g.item),f=this,h={tryItemSourceExists:function(){if(i===null){var n=k.childNodes,m=[];for(var o=0,l=n.length;o<l;o++){if(n[o].data===e){i=n[o];break}}}},created:function(l){if(l.elm===e){f.create(l)}},added:function(l){if(l.elm.parentNode===null){f.add(l)}}};this.get=function(p,n){h.tryItemSourceExists();h.created(p);var m={};for(var o=0,l=n.length;o<l;o++){m[n[o]]=c.getByClass(n[o],p.elm)[0].innerHTML}return m};this.set=function(n,m){h.created(n);for(var l in m){if(m.hasOwnProperty(l)){var o=c.getByClass(l,n.elm,true);if(o){o.innerHTML=m[l]}}}};this.create=function(m){if(m.elm!==e){return}h.tryItemSourceExists();var l=i.cloneNode(true);l.id="";m.elm=l;f.set(m,m.values())};this.add=function(l){h.created(l);k.appendChild(l.elm)};this.remove=function(l){k.removeChild(l.elm)};this.show=function(l){h.created(l);h.added(l);k.appendChild(l.elm)};this.hide=function(l){if(l.elm!==e&&l.elm.parentNode===k){k.removeChild(l.elm)}};this.clear=function(){if(k.hasChildNodes()){while(k.childNodes.length>=1){k.removeChild(k.firstChild)}}}};c={getByClass:(function(){if(a.getElementsByClassName){return function(g,f,h){if(h){return f.getElementsByClassName(g)[0]}else{return f.getElementsByClassName(g)}}}else{return function(m,g,o){var p=[],q="*";if(g==null){g=a}var k=g.getElementsByTagName(q);var f=k.length;var n=new RegExp("(^|\\s)"+m+"(\\s|$)");for(var l=0,h=0;l<f;l++){if(n.test(k[l].className)){if(o){return k[l]}else{p[h]=k[l];h++}}}return p}}})(),addEvent:(function(g,f){if(f.addEventListener){return function(m,l,j){if((m&&!(m instanceof Array)&&!m.length&&!c.isNodeList(m)&&(m.length!==0))||m===g){m.addEventListener(l,j,false)}else{if(m&&m[0]!==e){var h=m.length;for(var k=0;k<h;k++){c.addEvent(m[k],l,j)}}}}}else{if(f.attachEvent){return function(m,l,j){if((m&&!(m instanceof Array)&&!m.length&&!c.isNodeList(m)&&(m.length!==0))||m===g){m.attachEvent("on"+l,function(){return j.call(m,g.event)})}else{if(m&&m[0]!==e){var h=m.length;for(var k=0;k<h;k++){c.addEvent(m[k],l,j)}}}}}}})(this,a),getAttribute:function(l,g){var f=(l.getAttribute&&l.getAttribute(g))||null;if(!f){var h=l.attributes;var k=h.length;for(var j=0;j<k;j++){if(g[j]!==e){if(g[j].nodeName===g){f=g[j].nodeValue}}}}return f},isNodeList:function(g){var f=Object.prototype.toString.call(g);if(typeof g==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(f)&&(g.length==0||(typeof node==="object"&&g[0].nodeType>0))){return true}return false},hasClass:function(h,g){var f=this.getAttribute(h,"class");return(f.search(g)>-1)},addClass:function(h,g){if(!this.hasClass(h,g)){var f=this.getAttribute(h,"class");f=f+" "+g+" ";f=f.replace(/\s{2,}/g," ");h.setAttribute("class",f)}},removeClass:function(h,g){if(this.hasClass(h,g)){var f=this.getAttribute(h,"class");f=f.replace(g,"");h.setAttribute("class",f)}}};d.List=b;d.ListJsHelpers=c})(window);