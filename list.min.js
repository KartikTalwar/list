(function(f,g){var b=f.document,d=f.navigator,c=f.location,a;function e(j,s,o){var q=this,n,p,m,r,l,i,k;this.listContainer=b.getElementById(j);this.items=[];this.list=null;this.templateEngines={};this.maxVisibleItemsCount=s.maxVisibleItemsCount||200;p=function(t,v){v.list=v.list||j;v.listClass=v.listClass||"list";v.searchClass=v.searchClass||"search";v.sortClass=v.sortClass||"sort";n=new i(q,v);q.list=a.getByClass(v.listClass,q.listContainer,true);a.addEvent(a.getByClass(v.searchClass,q.listContainer),"keyup",q.search);k=a.getByClass(v.sortClass,q.listContainer);a.addEvent(k,"click",q.sort);if(v.valueNames){var w=m.get(),u=v.valueNames;if(v.indexAsync){m.indexAsync(w,u)}else{m.index(w,u)}}if(t!==g){q.add(t)}};m={get:function(){var v=q.list.childNodes,u=[];for(var w=0,t=v.length;w<t;w++){if(v[w].data===g){u.push(v[w])}}return u},index:function(t,v){for(var w=0,u=t.length;w<u;w++){q.items.push(new l(v,t[w]))}},indexAsync:function(t,u){var v=t.splice(0,100);this.index(v,u);if(t.length>0){setTimeout(function(){m.indexAsync(t,u)},10)}}};this.add=function(u,v){var y=[],x=false;if(u[0]===g){u=[u]}for(var w=0,t=u.length;w<t;w++){var z=null;if(u[w] instanceof l){z=u[w];z.reload()}else{x=(q.items.length>q.maxVisibleItemsCount)?true:false;z=new l(u[w],g,x)}if(!x){n.add(z,v)}q.items.push(z);y.push(z)}return y};var h=null;this.addAsync=function(t,u){var v=u?u.count||100:100,w=t.splice(0,v);q.add(w,u);if(t.length>0){setTimeout(function(){q.addAsync(t,u)},10)}};this.remove=function(y,x,u){var w=0;for(var v=0,t=q.items.length;v<t;v++){if(q.items[v].values()[y]==x){n.remove(q.items[v],u);q.items.splice(v,1);t--;w++}}return w};this.get=function(y,w){var x=[];for(var u=0,t=q.items.length;u<t;u++){var v=q.items[u];if(v.values()[y]==w){x.push(v)}}if(x.length==0){return null}else{if(x.length==1){return x[0]}else{return x}}};this.sort=function(z,D){var t=q.items.length,C=null,x=z.target||z.srcElement,v="",y=false,B="asc",w="desc",D=D||{};if(x===g){C=z;y=D.asc||false}else{C=a.getAttribute(x,"data-sort");y=a.hasClass(x,B)?false:true}for(var u=0,A=k.length;u<A;u++){a.removeClass(k[u],B);a.removeClass(k[u],w)}if(y){if(x!==g){a.addClass(x,B)}y=true}else{if(x!==g){a.addClass(x,w)}y=false}if(D.sortFunction){D.sortFunction=D.sortFunction}else{D.sortFunction=function(F,E){return r.alphanum(F.values()[C],E.values()[C],y)}}q.items.sort(D.sortFunction);n.clear();for(var u=0,A=q.items.length;u<A;u++){if(q.maxVisibleItemsCount>u){n.add(q.items[u])}}};r={alphanum:function(v,u,w){if(v===g||v===null){v=""}if(u===g||u===null){u=""}v=v.toString().replace(/&(lt|gt);/g,function(x,C){return(C=="lt")?"<":">"});v=v.replace(/<\/?[^>]+(>|$)/g,"");u=u.toString().replace(/&(lt|gt);/g,function(x,C){return(C=="lt")?"<":">"});u=u.replace(/<\/?[^>]+(>|$)/g,"");var y=this.chunkify(v);var A=this.chunkify(u);for(var t=0;y[t]&&A[t];t++){if(y[t]!==A[t]){var B=Number(y[t]),z=Number(A[t]);if(w){if(B==y[t]&&z==A[t]){return B-z}else{return(y[t]>A[t])?1:-1}}else{if(B==y[t]&&z==A[t]){return z-B}else{return(y[t]>A[t])?-1:1}}}}return y.length-A.length},chunkify:function(A){var D=[],v=0,C=-1,B=0,z,w;while(z=(w=A.charAt(v++)).charCodeAt(0)){var u=(z==45||z==46||(z>=48&&z<=57));if(u!==B){D[++C]="";B=u}D[C]+=w}return D}};this.search=function(F,v){var B=[],z=F.target||F.srcElement;if(z!==g){F=z.value.toLowerCase()}else{F=F.toLowerCase()}F=F.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");var u=false;if(v===g){u=true}n.clear();if(F===""){for(var y=0,A=q.items.length;((y<A)&&(y<q.maxVisibleItemsCount));y++){q.items[y].show()}}else{for(var w=0,t=q.items.length;w<t;w++){var E=false,D=q.items[w];if(u){v=D.values()}for(var x in v){if(v.hasOwnProperty(x)&&v[x]!==null){var C=v[x].toString().toLowerCase();if((F!=="")&&(C.search(F)>-1)){E=true}}}if(E){B.push(D)}if(E&&(q.maxVisibleItemsCount>B.length)){D.show()}}}return B};this.filter=function(x){var t=[];for(var v=0,u=q.items.length;v<u;v++){var w=q.items[v];if(x===false||x===g){w.show();t.push(w)}else{if(x(w.values())){t.push(w);w.show()}else{w.hide()}}}return t};this.size=function(){return q.items.length};this.clear=function(){n.clear();q.items=[]};l=function(u,w,v){var x=this,t={};var y=function(A,C,B){if(C===g){if(B){x.values(A,B)}else{x.values(A)}}else{x.elm=C;var z=n.get(x,A);x.values(z)}};this.values=function(A,B){if(A!==g){for(var z in A){t[z]=A[z]}if(B!==true){n.set(x,x.values())}}else{return t}};this.show=function(){n.show(x)};this.hide=function(){n.hide(x)};y(u,w,v)};i=function(u,t){if(t.engine===g){t.engine="standard"}else{t.engine=t.engine.toLowerCase()}return new q.constructor.prototype.templateEngines[t.engine](u,t)};p(o,s)}e.prototype.templateEngines={};e.prototype.templateEngines.standard=function(l,i){var m=a.getByClass(i.listClass,b.getElementById(i.list))[0],k=b.getElementById(i.item),h=this,j={tryItemSourceExists:function(){if(k===null){var p=m.childNodes,o=[];for(var q=0,n=p.length;q<n;q++){if(p[q].data===g){k=p[q];break}}}},created:function(n){if(n.elm===g){h.create(n)}},added:function(n){if(n.elm.parentNode===null){h.add(n)}}};this.get=function(r,p){j.tryItemSourceExists();j.created(r);var o={};for(var q=0,n=p.length;q<n;q++){o[p[q]]=a.getByClass(p[q],r.elm)[0].innerHTML}return o};this.set=function(p,o){j.created(p);for(var n in o){if(o.hasOwnProperty(n)){var q=a.getByClass(n,p.elm,true);if(q){q.innerHTML=o[n]}}}};this.create=function(o){if(o.elm!==g){return}j.tryItemSourceExists();var n=k.cloneNode(true);n.id="";o.elm=n;h.set(o,o.values())};this.add=function(n){j.created(n);m.appendChild(n.elm)};this.remove=function(n){m.removeChild(n.elm)};this.show=function(n){j.created(n);j.added(n);m.appendChild(n.elm)};this.hide=function(n){if(n.elm!==g&&n.elm.parentNode===m){m.removeChild(n.elm)}};this.clear=function(){if(m.hasChildNodes()){while(m.childNodes.length>=1){m.removeChild(m.firstChild)}}}};a={getByClass:(function(){if(b.getElementsByClassName){return function(i,h,j){if(j){return h.getElementsByClassName(i)[0]}else{return h.getElementsByClassName(i)}}}else{return function(o,k,q){var r=[],s="*";if(k==null){k=b}var m=k.getElementsByTagName(s);var h=m.length;var p=new RegExp("(^|\\s)"+o+"(\\s|$)");for(var n=0,l=0;n<h;n++){if(p.test(m[n].className)){if(q){return m[n]}else{r[l]=m[n];l++}}}return r}}})(),addEvent:(function(i,h){if(h.addEventListener){return function(n,m,k){if((n&&!(n instanceof Array)&&!n.length&&!a.isNodeList(n)&&(n.length!==0))||n===i){n.addEventListener(m,k,false)}else{if(n&&n[0]!==g){var j=n.length;for(var l=0;l<j;l++){a.addEvent(n[l],m,k)}}}}}else{if(h.attachEvent){return function(n,m,k){if((n&&!(n instanceof Array)&&!n.length&&!a.isNodeList(n)&&(n.length!==0))||n===i){n.attachEvent("on"+m,function(){return k.call(n,i.event)})}else{if(n&&n[0]!==g){var j=n.length;for(var l=0;l<j;l++){a.addEvent(n[l],m,k)}}}}}}})(this,b),getAttribute:function(n,j){var h=(n.getAttribute&&n.getAttribute(j))||null;if(!h){var k=n.attributes;var m=k.length;for(var l=0;l<m;l++){if(j[l]!==g){if(j[l].nodeName===j){h=j[l].nodeValue}}}}return h},isNodeList:function(i){var h=Object.prototype.toString.call(i);if(typeof i==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(h)&&(i.length==0||(typeof node==="object"&&i[0].nodeType>0))){return true}return false},hasClass:function(j,i){var h=this.getAttribute(j,"class");return(h.search(i)>-1)},addClass:function(j,i){if(!this.hasClass(j,i)){var h=this.getAttribute(j,"class");h=h+" "+i+" ";h=h.replace(/\s{2,}/g," ");j.setAttribute("class",h)}},removeClass:function(j,i){if(this.hasClass(j,i)){var h=this.getAttribute(j,"class");h=h.replace(i,"");j.setAttribute("class",h)}}};f.List=e;f.ListJsHelpers=a})(window);